{% extends "base_template.html" %}
{% load static %}

{% block title %}Sign In{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'accounts/css/auth.css' %}">
<link rel="stylesheet" href="{% static 'accounts/css/login.css' %}">
{% endblock %}

{% block content %}
<div class="auth-page">

  <!-- Floating orbs -->
  <div class="login-orb login-orb-1"></div>
  <div class="login-orb login-orb-2"></div>

  <!-- Top bar -->
  <div class="auth-topbar">
    <a href="/" class="auth-brand">
      MySite <span class="auth-brand-dot"></span>
    </a>
    <a href="/" class="auth-topbar-link">
      <i class="fas fa-arrow-left"></i> Back to Home
    </a>
  </div>

  <!-- Split layout -->
  <div class="login-layout">

    <!-- Left: decorative copy panel -->
    <div class="login-split">
      <div class="login-deco">
        <h1 class="login-deco-tagline">
          Welcome<br><em>back.</em>
        </h1>
        <p class="login-deco-sub">
          Sign in to pick up where you left off. Your work, your progress,
          and your preferences are all waiting for you.
        </p>
        <div class="trust-badges">
          <div class="trust-badge">
            <i class="fas fa-lock"></i>
            <span>Secured with 256-bit encryption</span>
          </div>
          <div class="trust-badge">
            <i class="fas fa-user-shield"></i>
            <span>Your data is never sold or shared</span>
          </div>
          <div class="trust-badge">
            <i class="fas fa-bolt"></i>
            <span>Instant access after sign in</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Right: auth card -->
    <div class="login-card-panel">
      <div class="auth-card">
        <div class="auth-card-stripe"></div>
        <div class="auth-card-inner">

          <div class="auth-card-header">
            <div class="auth-icon-wrap">
              <i class="fa-solid fa-right-to-bracket"></i>
            </div>
            <h2>Sign In</h2>
            <p>Enter your credentials to continue</p>
          </div>

          {% if error %}
          <div class="auth-alert error">
            <i class="fas fa-circle-exclamation"></i>
            <span>{{ error }}</span>
          </div>
          {% endif %}

          <!-- Social buttons -->
          {% load socialaccount %}
          <div class="social-row cols-3">
            <a href="{% provider_login_url 'google' %}" class="social-btn google">
              <i class="fab fa-google"></i> Google
            </a>
          </div>

          <div class="auth-divider">or with email</div>

          <form method="post" novalidate id="login-form">
            {% csrf_token %}

            <div class="auth-form-group">
              <label class="auth-label" for="id_email">Email Address</label>
              <div class="auth-input-wrap">
                <i class="fas fa-envelope auth-input-icon"></i>
                <input type="email" name="email" id="id_email"
                  class="auth-input"
                  placeholder="you@example.com"
                  autocomplete="email" autofocus />
              </div>
            </div>

            <div class="auth-form-group">
              <label class="auth-label" for="id_password">
                Password
                <a href="#" class="auth-label-link">Forgot password?</a>
              </label>
              <div class="auth-input-wrap">
                <i class="fas fa-lock auth-input-icon"></i>
                <input type="password" name="password" id="id_password"
                  class="auth-input has-toggle"
                  placeholder="Your password"
                  autocomplete="current-password" />
                <button type="button" class="auth-toggle-pw"
                  data-pw-toggle="id_password" aria-label="Toggle password visibility">
                  <i class="fas fa-eye"></i>
                </button>
              </div>
            </div>

            <div class="auth-check-row">
              <input type="checkbox" name="remember_me" id="remember_me">
              <label class="auth-check-label" for="remember_me">Keep me signed in for 30 days</label>
            </div>

            <button type="submit" class="auth-btn" id="login-btn">
              <i class="fas fa-right-to-bracket"></i>&nbsp; Sign In
            </button>
          </form>

        </div>

        <div class="auth-card-footer">
          Don't have an account? <a href="{% url 'accounts:signup' %}">Create one free</a>
        </div>
      </div>
    </div>

  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'accounts/js/auth.js' %}"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    initLoadingSubmit('login-form', 'login-btn', 'Signing inâ€¦');
  });
</script>
{% endblock %}